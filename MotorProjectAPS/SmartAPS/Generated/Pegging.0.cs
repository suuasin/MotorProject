/*------------------------------------------------------------------------------------------------------------------------------------------------------------
 <auto-generated>
     This code was generated by a mozart.

     Changes to this file may cause incorrect behavior and will be lost if
     the code is regenerated.
 </auto-generated>
------------------------------------------------------------------------------------------------------------------------------------------------------------*/

using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Common;
using System.Linq;
using System.Linq.Expressions;
using System.Text;
using Mozart.Common;
using Mozart.Collections;
using Mozart.Extensions;
using Mozart.Mapping;
using Mozart.Data;
using Mozart.Data.Entity;
using Mozart.Task.Execution;
using SmartAPS.DataModel;
using SmartAPS.Inputs;
using SmartAPS.Outputs;
using Mozart.SeePlan.Pegging;
using Mozart.SeePlan.General.Pegging;

namespace SmartAPS
{
    
    /// <summary>
    /// Pegging execution model class
    /// </summary>
    public partial class Pegging_Module : ExecutionModule
    {
        public override string Name
        {
            get
            {
                return "Pegging";
            }
        }
        protected override System.Type ExecutorType
        {
            get
            {
                return typeof(Mozart.SeePlan.Pegging.Pegger);
            }
        }
        protected override void Configure()
        {
            Mozart.Task.Execution.ServiceLocator.RegisterController(new ModelBuildImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new ModelRunImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new APPLY_ACTImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new APPLY_YIELDImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new BUILD_INPLANImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new CHANGE_PARTImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new FILTER_TARGETImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new MANIPULATE_DEMANDImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new PEG_WIPImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new PREPARE_TARGETImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new PREPARE_WIPImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new SHIFT_TATImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new SMOOTH_DEMANDImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new WRITE_TARGETImpl());
            Mozart.Task.Execution.ServiceLocator.RegisterController(new WRITE_UNPEGImpl());
            new RulesImpl().Configure();
            new RulePresetsImpl().Configure();
            new PegModelsImpl().Configure();
        }
        /// <summary>
        /// ModelBuild execution control implementation
        /// </summary>
        internal partial class ModelBuildImpl : Mozart.SeePlan.Pegging.PeggerModelBuildInterface
        {
        }
        /// <summary>
        /// ModelRun execution control implementation
        /// </summary>
        internal partial class ModelRunImpl : Mozart.SeePlan.Pegging.PeggerModelRunInterface
        {
            private Mozart.SeePlan.General.Pegging.PeggerModelControl fpPeggerModelControl = new Mozart.SeePlan.General.Pegging.PeggerModelControl();
            public override int ComparePegTarget(Mozart.SeePlan.Pegging.PegTarget x, Mozart.SeePlan.Pegging.PegTarget y)
            {
                bool handled = false;
                int returnValue = 0;
                returnValue = this.fpPeggerModelControl.COMPARE_PEG_TARGET(x, y, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// APPLY_ACT execution control implementation
        /// </summary>
        internal partial class APPLY_ACTImpl : Mozart.SeePlan.Pegging.ApplyActControl
        {
        }
        /// <summary>
        /// APPLY_YIELD execution control implementation
        /// </summary>
        internal partial class APPLY_YIELDImpl : Mozart.SeePlan.Pegging.ApplyYieldControl
        {
            private SmartAPS.Logic.Pegging.APPLY_YIELD fAPPLY_YIELD = new SmartAPS.Logic.Pegging.APPLY_YIELD();
            public override double GetYield(Mozart.SeePlan.Pegging.PegPart pegPart)
            {
                bool handled = false;
                double returnValue = 0D;
                returnValue = this.fAPPLY_YIELD.GET_YIELD0(pegPart, ref handled, returnValue);
                return returnValue;
            }
            public override bool UseTargetYield(Mozart.SeePlan.Pegging.PegPart pegPart, Mozart.SeePlan.Pegging.PegStage stage)
            {
                bool handled = false;
                bool returnValue = false;
                returnValue = this.fAPPLY_YIELD.USE_TARGET_YIELD0(pegPart, stage, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// BUILD_INPLAN execution control implementation
        /// </summary>
        internal partial class BUILD_INPLANImpl : Mozart.SeePlan.General.Pegging.BuildInPlanControl
        {
            private SmartAPS.Logic.Pegging.BUILD_INPLAN fBUILD_INPLAN = new SmartAPS.Logic.Pegging.BUILD_INPLAN();
            public override Mozart.SeePlan.Pegging.PegPart BuildInPlan(Mozart.SeePlan.Pegging.PegPart pegPart)
            {
                bool handled = false;
                Mozart.SeePlan.Pegging.PegPart returnValue = null;
                returnValue = this.fBUILD_INPLAN.BUILD_IN_PLAN0(pegPart, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// CHANGE_PART execution control implementation
        /// </summary>
        internal partial class CHANGE_PARTImpl : Mozart.SeePlan.Pegging.ChangePartControl
        {
            private SmartAPS.Logic.Pegging.CHANGE_PART fCHANGE_PART = new SmartAPS.Logic.Pegging.CHANGE_PART();
            public override System.Collections.Generic.List<object> GetPartChangeInfos(Mozart.SeePlan.Pegging.PegPart pegPart, bool isRun)
            {
                bool handled = false;
                System.Collections.Generic.List<object> returnValue = null;
                returnValue = this.fCHANGE_PART.GET_PART_CHANGE_INFOS0(pegPart, isRun, ref handled, returnValue);
                return returnValue;
            }
            public override Mozart.SeePlan.Pegging.PegPart ApplyPartChangeInfo(Mozart.SeePlan.Pegging.PegPart pegPart, object partChangeInfo, bool isRun)
            {
                bool handled = false;
                Mozart.SeePlan.Pegging.PegPart returnValue = null;
                returnValue = this.fCHANGE_PART.APPLY_PART_CHANGE_INFO0(pegPart, partChangeInfo, isRun, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// FILTER_TARGET execution control implementation
        /// </summary>
        internal partial class FILTER_TARGETImpl : Mozart.SeePlan.Pegging.FilterTargetControl
        {
        }
        /// <summary>
        /// MANIPULATE_DEMAND execution control implementation
        /// </summary>
        internal partial class MANIPULATE_DEMANDImpl : Mozart.SeePlan.General.Pegging.ManipulateDemandControl
        {
        }
        /// <summary>
        /// PEG_WIP execution control implementation
        /// </summary>
        internal partial class PEG_WIPImpl : Mozart.SeePlan.Pegging.PegWipControl
        {
            private SmartAPS.Logic.Pegging.PEG_WIP fPEG_WIP = new SmartAPS.Logic.Pegging.PEG_WIP();
            public override System.Collections.Generic.IList<Mozart.SeePlan.Pegging.IMaterial> GetWips(Mozart.SeePlan.Pegging.PegPart pegPart, bool isRun)
            {
                bool handled = false;
                System.Collections.Generic.IList<Mozart.SeePlan.Pegging.IMaterial> returnValue = null;
                returnValue = this.fPEG_WIP.GET_WIPS0(pegPart, isRun, ref handled, returnValue);
                return returnValue;
            }
            public override int SortWip(Mozart.SeePlan.Pegging.Rule.MaterialInfo x, Mozart.SeePlan.Pegging.Rule.MaterialInfo y)
            {
                bool handled = false;
                int returnValue = 0;
                returnValue = this.fPEG_WIP.SORT_WIP0(x, y, ref handled, returnValue);
                return returnValue;
            }
            public override bool CanPegMore(Mozart.SeePlan.Pegging.PegTarget target, Mozart.SeePlan.Pegging.IMaterial m, bool isRun)
            {
                bool handled = false;
                bool returnValue = false;
                returnValue = this.fPEG_WIP.CAN_PEG_MORE0(target, m, isRun, ref handled, returnValue);
                return returnValue;
            }
            public override void WritePeg(Mozart.SeePlan.Pegging.PegTarget target, Mozart.SeePlan.Pegging.IMaterial m, double qty)
            {
                bool handled = false;
                this.fPEG_WIP.WRITE_PEG0(target, m, qty, ref handled);
            }
        }
        /// <summary>
        /// PREPARE_TARGET execution control implementation
        /// </summary>
        internal partial class PREPARE_TARGETImpl : Mozart.SeePlan.General.Pegging.PrepareTargetControl
        {
            private SmartAPS.Logic.Pegging.PREPARE_TARGET fPREPARE_TARGET = new SmartAPS.Logic.Pegging.PREPARE_TARGET();
            public override Mozart.SeePlan.Pegging.PegPart PrepareTarget(Mozart.SeePlan.Pegging.PegPart pegPart)
            {
                bool handled = false;
                Mozart.SeePlan.Pegging.PegPart returnValue = null;
                returnValue = this.fPREPARE_TARGET.PREPARE_TARGET0(pegPart, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// PREPARE_WIP execution control implementation
        /// </summary>
        internal partial class PREPARE_WIPImpl : Mozart.SeePlan.General.Pegging.PrepareWipControl
        {
            private SmartAPS.Logic.Pegging.PREPARE_WIP fPREPARE_WIP = new SmartAPS.Logic.Pegging.PREPARE_WIP();
            public override Mozart.SeePlan.Pegging.PegPart PrepareWip(Mozart.SeePlan.Pegging.PegPart pegPart)
            {
                bool handled = false;
                Mozart.SeePlan.Pegging.PegPart returnValue = null;
                returnValue = this.fPREPARE_WIP.PREPARE_WIP0(pegPart, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// SHIFT_TAT execution control implementation
        /// </summary>
        internal partial class SHIFT_TATImpl : Mozart.SeePlan.Pegging.ShiftTatControl
        {
            private SmartAPS.Logic.Pegging.SHIFT_TAT fSHIFT_TAT = new SmartAPS.Logic.Pegging.SHIFT_TAT();
            public override System.TimeSpan GetTat(Mozart.SeePlan.Pegging.PegPart pegPart, bool isRun)
            {
                bool handled = false;
                System.TimeSpan returnValue = default(System.TimeSpan);
                returnValue = this.fSHIFT_TAT.GET_TAT0(pegPart, isRun, ref handled, returnValue);
                return returnValue;
            }
            public override bool UseTargetTat(Mozart.SeePlan.Pegging.PegPart pegPart, Mozart.SeePlan.Pegging.PegStage stage, bool isRun)
            {
                bool handled = false;
                bool returnValue = false;
                returnValue = this.fSHIFT_TAT.USE_TARGET_TAT0(pegPart, stage, isRun, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// SMOOTH_DEMAND execution control implementation
        /// </summary>
        internal partial class SMOOTH_DEMANDImpl : Mozart.SeePlan.Pegging.SmoothDemandControl
        {
            private Mozart.SeePlan.Pegging.PreRuleLogic fpPreRuleLogic = new Mozart.SeePlan.Pegging.PreRuleLogic();
            public override Mozart.SeePlan.Pegging.IInnerBucket CreateInnerBucket(string key, Mozart.SeePlan.Pegging.MoPlan moPlan, System.DateTime weekStartDate, bool isW00)
            {
                bool handled = false;
                Mozart.SeePlan.Pegging.IInnerBucket returnValue = null;
                returnValue = this.fpPreRuleLogic.CREATE_INNER_BUCKET_DEF(key, moPlan, weekStartDate, isW00, ref handled, returnValue);
                return returnValue;
            }
            public override Mozart.SeePlan.Pegging.IOuterBucket CreateOuterBucket(string key)
            {
                bool handled = false;
                Mozart.SeePlan.Pegging.IOuterBucket returnValue = null;
                returnValue = this.fpPreRuleLogic.CREATE_OUTER_BUCKET_DEF(key, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// WRITE_TARGET execution control implementation
        /// </summary>
        internal partial class WRITE_TARGETImpl : Mozart.SeePlan.Pegging.WriteTargetControl
        {
            private SmartAPS.Logic.Pegging.WRITE_TARGET fWRITE_TARGET = new SmartAPS.Logic.Pegging.WRITE_TARGET();
            public override void WriteTarget(Mozart.SeePlan.Pegging.PegPart pegPart, bool isOut)
            {
                bool handled = false;
                this.fWRITE_TARGET.WRITE_TARGET0(pegPart, isOut, ref handled);
            }
            public override object GetStepPlanKey(Mozart.SeePlan.Pegging.PegPart pegPart)
            {
                bool handled = false;
                object returnValue = null;
                returnValue = this.fWRITE_TARGET.GET_STEP_PLAN_KEY0(pegPart, ref handled, returnValue);
                return returnValue;
            }
            public override Mozart.SeePlan.DataModel.StepTarget CreateStepTarget(Mozart.SeePlan.Pegging.PegTarget pegTarget, object stepPlanKey, Mozart.SeePlan.DataModel.Step step, bool isRun)
            {
                bool handled = false;
                Mozart.SeePlan.DataModel.StepTarget returnValue = null;
                returnValue = this.fWRITE_TARGET.CREATE_STEP_TARGET0(pegTarget, stepPlanKey, step, isRun, ref handled, returnValue);
                return returnValue;
            }
        }
        /// <summary>
        /// WRITE_UNPEG execution control implementation
        /// </summary>
        internal partial class WRITE_UNPEGImpl : Mozart.SeePlan.Pegging.WriteUnpegControl
        {
            private SmartAPS.Logic.Pegging.WRITE_UNPEG fWRITE_UNPEG = new SmartAPS.Logic.Pegging.WRITE_UNPEG();
            public override void WriteUnpeg(Mozart.SeePlan.Pegging.PegPart pegPart)
            {
                bool handled = false;
                this.fWRITE_UNPEG.WRITE_UNPEG0(pegPart, ref handled);
            }
        }
        internal class RulesImpl : IModelConfigurable
        {
            public virtual void Configure()
            {
            }
        }
        internal class RulePresetsImpl : IModelConfigurable
        {
            public virtual void Configure()
            {
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreateInit());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreateRunPeg());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreateWaitPeg());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreatePostPegStage());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreateInPartChange());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreateOutPartChange());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreateWaitPartChange());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreatePreRunPeg());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreatePostRunPeg());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreatePreWaitPeg());
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.RuleFlow.IRulePreset>(this.CreatePostWaitPeg());
            }
            /// <summary>
            /// Init's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreateInit()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("PREPARE_TARGET");
                list.Add("PREPARE_WIP");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                return new Mozart.RuleFlow.RulePreset("Init", list, props);
            }
            /// <summary>
            /// RunPeg's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreateRunPeg()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("PEG_WIP");
                list.Add("SHIFT_TAT");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", true);
                return new Mozart.RuleFlow.RulePreset("RunPeg", list, props);
            }
            /// <summary>
            /// WaitPeg's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreateWaitPeg()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("PEG_WIP");
                list.Add("SHIFT_TAT");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", false);
                return new Mozart.RuleFlow.RulePreset("WaitPeg", list, props);
            }
            /// <summary>
            /// PostPegStage's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreatePostPegStage()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("WRITE_UNPEG");
                list.Add("BUILD_INPLAN");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                return new Mozart.RuleFlow.RulePreset("PostPegStage", list, props);
            }
            /// <summary>
            /// InPartChange's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreateInPartChange()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("CHANGE_PART");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", false);
                props.Set("Position", "IN");
                return new Mozart.RuleFlow.RulePreset("InPartChange", list, props);
            }
            /// <summary>
            /// OutPartChange's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreateOutPartChange()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("CHANGE_PART");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", false);
                props.Set("Position", "OUT");
                return new Mozart.RuleFlow.RulePreset("OutPartChange", list, props);
            }
            /// <summary>
            /// WaitPartChange's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreateWaitPartChange()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("CHANGE_PART");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", false);
                props.Set("Position", "WAIT");
                return new Mozart.RuleFlow.RulePreset("WaitPartChange", list, props);
            }
            /// <summary>
            /// PreRunPeg's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreatePreRunPeg()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("WRITE_TARGET");
                list.Add("APPLY_YIELD");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", true);
                return new Mozart.RuleFlow.RulePreset("PreRunPeg", list, props);
            }
            /// <summary>
            /// PostRunPeg's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreatePostRunPeg()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("PEG_WIP");
                list.Add("SHIFT_TAT");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", true);
                return new Mozart.RuleFlow.RulePreset("PostRunPeg", list, props);
            }
            /// <summary>
            /// PreWaitPeg's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreatePreWaitPeg()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("WRITE_TARGET");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", false);
                return new Mozart.RuleFlow.RulePreset("PreWaitPeg", list, props);
            }
            /// <summary>
            /// PostWaitPeg's RulePreset
            /// </summary>
            private Mozart.RuleFlow.RulePreset CreatePostWaitPeg()
            {
                System.Collections.Generic.List<string> list = new System.Collections.Generic.List<string>();
                list.Add("PEG_WIP");
                list.Add("SHIFT_TAT");
                Mozart.RuleFlow.StageProperties props = new Mozart.RuleFlow.StageProperties();
                props.Set("IsRun", false);
                return new Mozart.RuleFlow.RulePreset("PostWaitPeg", list, props);
            }
        }
        internal class PegModelsImpl : IModelConfigurable
        {
            public virtual void Configure()
            {
                Mozart.Task.Execution.ServiceLocator.RegisterInstance<Mozart.SeePlan.Pegging.IPeggerCfg2>(this.BuildCfg());
            }
            private SmartAPS.Logic.Pegging.StepPegging fStepPegging = new SmartAPS.Logic.Pegging.StepPegging();
            /// <summary>
            /// SmartAPSPegger's Pegger Model
            /// </summary>
            private Mozart.SeePlan.Pegging.IPeggerModel2 BuildSmartAPSPegger()
            {
                Mozart.SeePlan.Pegging.PeggerModelBuilder2 SmartAPSPegger = new Mozart.SeePlan.Pegging.PeggerModelBuilder2("SmartAPSPegger");
                Mozart.SeePlan.Pegging.PeggerAreaBuilder2 area0 = new Mozart.SeePlan.Pegging.PeggerAreaBuilder2("Start", false);
                Mozart.SeePlan.Pegging.PeggerAreaBuilder2 area1 = new Mozart.SeePlan.Pegging.PeggerAreaBuilder2("SmartFactory", false);
                Mozart.SeePlan.Pegging.PeggerNormalNodeBuilder node0 = new Mozart.SeePlan.Pegging.PeggerNormalNodeBuilder("PegInit");
                System.Collections.Generic.List<string> stgs0 = new System.Collections.Generic.List<string>();
                stgs0.Add("Init");
                node0.SetStages(stgs0);
                area1.AddNode(node0);
                Mozart.SeePlan.Pegging.PeggerProcessNodeBuilder node1 = new Mozart.SeePlan.Pegging.PeggerProcessNodeBuilder("StepPegging");
                node1.AddBlock("@S", "@S", Mozart.SeePlan.Pegging.BlockType.START);
                node1.AddNextBlockMap("@S", "PreRunPeg");
                node1.AddFunction("@S", ((Mozart.SeePlan.Pegging.GetLastPeggingStepDelegate)(this.fStepPegging.GETLASTPEGGINGSTEP)));
                node1.AddBlock("PreRunPeg", "PreRunPeg", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("PreRunPeg", "OutPartChange");
                node1.AddBlock("OutPartChange", "OutPartChange", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("OutPartChange", "PostRunPeg");
                node1.AddBlock("PostRunPeg", "PostRunPeg", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("PostRunPeg", "PreWaitPeg");
                node1.AddBlock("PreWaitPeg", "PreWaitPeg", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("PreWaitPeg", "InPartChange");
                node1.AddBlock("InPartChange", "InPartChange", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("InPartChange", "PostWaitPeg");
                node1.AddBlock("PostWaitPeg", "PostWaitPeg", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("PostWaitPeg", "WaitPartChange");
                node1.AddBlock("WaitPartChange", "WaitPartChange", Mozart.SeePlan.Pegging.BlockType.STAGE);
                node1.AddNextBlockMap("WaitPartChange", "@E");
                node1.AddBlock("@E", "@E", Mozart.SeePlan.Pegging.BlockType.END);
                node1.AddFunction("@E", ((Mozart.SeePlan.Pegging.GetPrevPeggingStepDelegate)(this.fStepPegging.GETPREVPEGGINGSTEP)));
                area1.AddNode(node1);
                Mozart.SeePlan.Pegging.PeggerNormalNodeBuilder node2 = new Mozart.SeePlan.Pegging.PeggerNormalNodeBuilder("PostPeg");
                System.Collections.Generic.List<string> stgs2 = new System.Collections.Generic.List<string>();
                stgs2.Add("PostPegStage");
                node2.SetStages(stgs2);
                area1.AddNode(node2);
                area0.AddNext(area1);
                SmartAPSPegger.SetStart(area0);
                return SmartAPSPegger.Build();
            }
            /// <summary>
            /// Pegger Configuration
            /// </summary>
            private Mozart.SeePlan.Pegging.IPeggerCfg2 BuildCfg()
            {
                Mozart.SeePlan.Pegging.PeggerCfgBuilder2 cfg = new Mozart.SeePlan.Pegging.PeggerCfgBuilder2();
                cfg.AddModel(this.BuildSmartAPSPegger(), true);
                return cfg.Build();
            }
        }
    }
}
